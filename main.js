//! PRODUCTS ARRAY
const products = [
  {
    name: 'Aloe Vera',
    price: 150,
    category: 'indoor',
    imageUrl:
      'url(https://res.cloudinary.com/dgrhbsilh/image/upload/v1699870739/Plantique/opt/ys1wguejzsao1f8se4ad_w8ta4e.jpg)',
    description:
      'This spiky, low-maintenance houseplant was the top-searched plant in nearly a dozen states, according to a recent survey by home furnishings site Joybird.',
    productLink: 'https://www.google.com/'
  },
  {
    name: 'Golden Pothos',
    price: 75,
    category: 'indoor',
    imageUrl:
      'url(https://res.cloudinary.com/dgrhbsilh/image/upload/v1699870730/Plantique/opt/golden_pothos_wljaai_qgjpsu.jpg)',
    description:
      'The Golden Pothos plant, also known as Epipremnum aureum, is a popular houseplant characterized by its heart-shaped leaves with vibrant golden-yellow variegation. It is a low-maintenance and versatile plant that thrives in various light conditions, making it an ideal choice for both beginner and experienced plant enthusiasts.',
    productLink: 'https://www.google.com/'
  },
  {
    name: 'Bamboo',
    price: 30,
    category: 'indoor',
    imageUrl:
      'url(https://res.cloudinary.com/dgrhbsilh/image/upload/v1699870740/Plantique/opt/bamboo_dyxygv_ck9dqa.jpg)',
    description:
      'The bamboo plant is a highly adaptable and fast-growing perennial grass that is known for its tall, sturdy stalks and feathery green leaves. It is prized for its versatility, being used for construction, furniture, and as a decorative plant in gardens.',
    productLink: 'https://www.google.com/'
  },
  {
    name: 'Philodendrons Scandens',
    price: 200,
    category: 'indoor',
    imageUrl:
      'url(https://res.cloudinary.com/dgrhbsilh/image/upload/v1699870734/Plantique/opt/Philodendrons_Scandens_qfvyjp_iciwcc.jpg)',
    description:
      'The Philodendron scandens, also known as the Heartleaf Philodendron, is a popular trailing houseplant with heart-shaped, glossy green leaves. It is a low-maintenance plant that thrives in various light conditions, making it a perfect choice for adding a touch of greenery to any indoor space.',
    productLink: 'https://www.google.com/'
  },
  {
    name: 'Croton',
    price: 64,
    category: 'indoor',
    imageUrl:
      'url(https://res.cloudinary.com/dgrhbsilh/image/upload/v1699870728/Plantique/opt/croton_f2dstn_kmudds.jpg)',
    description:
      'The Croton plant, scientifically known as Codiaeum variegatum, is a vibrant and eye-catching houseplant with colorful, variegated leaves in shades of red, orange, yellow, and green. It adds a bold and tropical touch to any indoor space and requires bright light and regular watering to thrive.',
    productLink: 'https://www.google.com/'
  },
  {
    name: 'Banyan Ficus',
    price: 450,
    category: 'outdoor',
    imageUrl:
      'url(https://res.cloudinary.com/dgrhbsilh/image/upload/v1699870741/Plantique/opt/Banyan_Ficus_jsunpi_jxome7.jpg)',
    description:
      'The Banyan Ficus, scientifically known as Ficus benghalensis, is a magnificent tree with a sprawling canopy and aerial roots that create a captivating and unique appearance. Its grandeur and resilience make it a symbol of strength and longevity, making it a popular choice for landscaping and as an indoor statement plant.',
    productLink: 'https://www.google.com/'
  },
  {
    name: 'Monstera',
    price: 50,
    category: 'outdoor',
    imageUrl:
      'url(https://res.cloudinary.com/dgrhbsilh/image/upload/v1699870733/Plantique/opt/monstera_opsosc_qovml1.jpg)',
    description:
      'The Monstera, scientifically known as Monstera deliciosa, is a striking and iconic houseplant with large, glossy, and fenestrated leaves that create a tropical and dramatic aesthetic. Its unique leaf shape and ability to thrive in various light conditions make it a popular choice for adding a touch of exotic beauty to any indoor space.',
    productLink: 'https://www.google.com/'
  },
  {
    name: 'Cyclamen',
    price: 96,
    category: 'outdoor',
    imageUrl:
      'url(https://res.cloudinary.com/dgrhbsilh/image/upload/v1699870729/Plantique/opt/Cyclamen_c9gxpu_yikjsv.jpg)',
    description:
      'The Cyclamen plant, known for its elegant and delicate blooms, is a charming addition to any indoor or outdoor space. With its heart-shaped leaves and vibrant flowers in shades of pink, white, or purple, it brings a touch of beauty and grace to any setting.',
    productLink: 'https://www.google.com/'
  },
  {
    name: 'bougainvillea',
    price: 32,
    category: 'climbing plants',
    imageUrl:
      'url(https://res.cloudinary.com/dgrhbsilh/image/upload/v1699870742/Plantique/opt/bougainvillea_x0wyoz_drqnl1.jpg)',
    description:
      'The Bougainvillea is a vibrant and showy flowering plant known for its stunning clusters of colorful bracts that surround small, inconspicuous flowers. With its ability to thrive in warm climates and its ability to climb or trail, it adds a burst of beauty and charm to gardens, fences, and trellises.',
    productLink: 'https://www.google.com/'
  },
  {
    name: 'chinese jasmine',
    price: 209,
    category: 'climbing plants',
    imageUrl:
      'url(https://res.cloudinary.com/dgrhbsilh/image/upload/v1699870728/Plantique/opt/chinese_jasmine_w76lkf_kjcsz0.jpg)',
    description:
      'The Chinese Jasmine, scientifically known as Jasminum polyanthum, is a fragrant and beautiful vine with clusters of delicate white flowers that bloom profusely. Its intoxicating scent and graceful appearance make it a popular choice for gardens and indoor spaces, adding a touch of elegance and serenity.',
    productLink: 'https://www.google.com/'
  },
  {
    name: 'honeysuckle',
    price: 106,
    category: 'climbing plants',
    imageUrl:
      'url(https://res.cloudinary.com/dgrhbsilh/image/upload/v1699870731/Plantique/opt/honeysuckle_zqfvk7_kyjgnb.jpg)',
    description:
      'Honeysuckle, a fragrant flowering vine, delights with its sweet-scented blossoms and vibrant colors, attracting hummingbirds and butterflies to any garden. Its twining nature and easy maintenance make it a charming addition to trellises, fences, or as a ground cover.',
    productLink: 'https://www.google.com/'
  },
  {
    name: 'mangifera indica',
    price: 189,
    category: 'fruit trees',
    imageUrl:
      'url(https://res.cloudinary.com/dgrhbsilh/image/upload/v1699870733/Plantique/opt/mangifera_indica_gdygjf_muicdu.jpg)',
    description:
      'Mangifera indica, commonly known as the Mango tree, is a tropical fruit tree renowned for its delicious and juicy mango fruits. With its lush foliage and sweet rewards, it is a prized addition to gardens and orchards, bringing a taste of the tropics to any environment.',
    productLink: 'https://www.google.com/'
  },
  {
    name: 'fig',
    price: 23,
    category: 'fruit trees',
    imageUrl:
      'url(https://res.cloudinary.com/dgrhbsilh/image/upload/v1699870729/Plantique/opt/fig_bmxnro_szlyy4.jpg)',
    description:
      'The fig plant is a small to medium-sized tree known for its delicious and nutritious fruit. It has large, lobed leaves and a distinct trunk, adding beauty to any garden or landscape.',
    productLink: 'https://www.google.com/'
  },
  {
    name: 'pomegranate',
    price: 289,
    category: 'fruit trees',
    imageUrl:
      'url(https://res.cloudinary.com/dgrhbsilh/image/upload/v1699870736/Plantique/opt/pomegranate_yww32e_itg0qp.jpg)',
    description:
      'The pomegranate is a vibrant and delicious fruit known for its sweet and tangy flavor, adorned with ruby-colored arils that burst with antioxidants and nutrients. It is often enjoyed fresh or used in a variety of culinary creations, adding a burst of flavor and a pop of color.q',
    productLink: 'https://www.google.com/'
  }
]

//! PRODUCT FILE
const createProductFile = (object) => {
  let productDom = document.createElement('div')
  productDom.className = 'product'
  let productLink = object.productLink
  productDom.setAttribute('href', productLink)
  productDom.style.backgroundImage = object.imageUrl

  let glassBox = document.createElement('div')
  glassBox.className = 'glass-box'
  productDom.append(glassBox)

  let arrowProductIconContainer = document.createElement('div')
  arrowProductIconContainer.classList.add('arrow-icon-product-container')

  let arrowProductIconImage = document.createElement('img')
  arrowProductIconImage.src =
    'https://res.cloudinary.com/dgrhbsilh/image/upload/v1699351368/Plantique/arrow-down_d51tvb.png'

  glassBox.append(arrowProductIconContainer)
  arrowProductIconContainer.append(arrowProductIconImage)

  let productTextContainer = document.createElement('div')
  productTextContainer.classList.add('product-text')
  let productTitle = document.createElement('h4')
  productTitle.innerText = object.name
  productTitle.className = 'product-title'
  let productDescription = document.createElement('p')
  productDescription.innerText = object.description
  productDescription.className = 'product-description'
  let productPrice = document.createElement('p')
  productPrice.className = 'subtitles'
  productPrice.innerText = object.price + 'â‚¬'

  productTextContainer.append(productTitle)
  productTextContainer.append(productDescription)
  productTextContainer.append(productPrice)
  glassBox.append(productTextContainer)

  // ? ADD CLICK TO EACH PRODUCT
  const visitProductPage = () => {
    window.open(productLink, '_blank').focus()
  }
  productDom.addEventListener('click', visitProductPage)

  return productDom
}

//! NEW ARRIVALS PRODUCTS
const getNewArrivalsProducts = (arr) => {
  let newArrivalsProducts = []
  let arrLength = arr.length
  newArrivalsProducts = arr.slice(arrLength - 3, arrLength)
  return newArrivalsProducts
}
let newArrivalsProducts = getNewArrivalsProducts(products)
const printNewArrivalsProducts = (arr) => {
  const newArrivalsProductsDiv = document.querySelector(
    '#new-arrivals-products'
  )
  newArrivalsProducts.forEach((product) => {
    let newProduct = createProductFile(product)
    newArrivalsProductsDiv.append(newProduct)
  })
}
printNewArrivalsProducts(newArrivalsProducts)

//! GET CATEGORIES FROM PRODUCTS AND PRINT THEM
const getCategoryTemplate = (category) => {
  return `
<option value="${category}">${category}</option>
`
}
let categoriesArray = []
const getCategoriesFromProducts = (arr) => {
  arr.forEach((object) => {
    let objectCategory = object.category
    if (!categoriesArray.includes(objectCategory)) {
      categoriesArray.push(objectCategory)
    } else {
    }
  })
  return categoriesArray
}
getCategoriesFromProducts(products)
const categorySelector = document.querySelector('#category-selector')
const printCategoriesInSelect = (arr) => {
  arr.forEach((category) => {
    let newCategoryOption = getCategoryTemplate(category)
    categorySelector.innerHTML += newCategoryOption
  })
}
printCategoriesInSelect(categoriesArray)

//! FILTERS SECTION
const priceSelector = document.querySelector('#price-input')
const filteredProductsArticle = document.querySelector('#filtered-products')

const filterProducts = () => {
  filteredProductsArticle.innerHTML = ''
  products.forEach((product) => {
    if (
      categorySelector.value === 'Select Category' ||
      categorySelector.value === 'all categories' ||
      product.category === categorySelector.value
    ) {
      if (product.price <= priceSelector.value || priceSelector.value === '') {
        let productDom = createProductFile(product)
        filteredProductsArticle.append(productDom)
      }
    }
  })
}

const submitButton = document.querySelector('#submit-button')
submitButton.addEventListener('click', filterProducts)

const clearFiltersButton = document.querySelector('#clear-button')
const clearFilters = () => {
  categorySelector.value = 'Select Category'
  priceSelector.value = ''
  filterProducts()
}
clearFiltersButton.addEventListener('click', clearFilters)

// IN ORDER TO HAVE EVERYTHING BEING SHOWN IN SCREEN AT STARTING
clearFilters()
